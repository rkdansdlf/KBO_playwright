## 🔗 KBO 데이터베이스 제약조건 설명

### 1. **시즌 메타 테이블 (`kbo_seasons`)**

이 테이블은 기록의 **'언제, 어떤 종류의 경기였는지'**라는 시간적, 분류적 정보를 중앙에서 관리합니다.

| 필드 | 역할 및 제약조건 설명 |
| :--- | :--- |
| **`season_id`** | **Primary Key (PK)** 입니다. 1982년부터 2030년까지의 모든 연도와 시즌 종류(정규시즌, 한국시리즈 등)의 **고유한 조합**을 식별하는 기본 키입니다. 이 ID를 통해 선수 기록 테이블과 연결됩니다. |
| **`season_year`** | **NOT NULL** 제약조건을 가지며, 기록이 몇 년도에 발생했는지 명확히 지정합니다. |
| **`league_type_code`** | **NOT NULL** 제약조건을 가지며, 정규시즌(0), 시범경기(1) 등 시즌의 종류를 숫자로 표준화하여 분류합니다. |

---

### 2. **팀 테이블 (`teams`)**

이 테이블은 기록의 **'어떤 팀에 소속되었는지'**라는 조직 정보를 관리하며, 팀 정보 변경 시 기록 데이터에 영향을 주지 않도록 분리되었습니다.

| 필드 | 역할 및 제약조건 설명 |
| :--- | :--- |
| **`team_id`** | **Primary Key (PK)** 입니다. 'LG', 'NC', 'SS'와 같이 KBO 팀을 고유하게 식별하는 코드입니다. 이 코드는 선수 기록 테이블의 `team_id` 필드에서 **Foreign Key**로 참조됩니다. |

---

### 3. **선수 기록 테이블 (`kbo_player_hitting_stats`, `kbo_player_pitching_stats`)**

이 테이블들은 실제 스탯 데이터를 저장하며, **세 개의 외래 키(FK)를 통해 상위 테이블과 강력하게 연결**되어 데이터 무결성을 보장합니다.

| 필드 | 역할 및 제약조건 설명 |
| :--- | :--- |
| **`season_id`** | **Foreign Key (FK)** 입니다. `kbo_seasons` 테이블의 PK를 참조합니다. 이 제약조건은 **"모든 선수 기록은 반드시 유효하게 정의된 시즌(연도 + 종류)에 속해야 한다"**는 규칙을 강제합니다. |
| **`player_id`** | **Foreign Key (FK)** 입니다. `player_basic` 테이블의 PK(선수 ID)를 참조합니다. 이 제약조건은 **"모든 기록은 반드시 유효한 KBO 선수에게 귀속되어야 한다"**는 규칙을 강제합니다. |
| **`team_id`** | **Foreign Key (FK)** 입니다. `teams` 테이블의 PK를 참조합니다. 이 제약조건은 **"기록 당시 선수가 소속된 팀은 반드시 존재하는 유효한 KBO 팀이어야 한다"**는 규칙을 강제합니다. |

### 🎯 핵심 관계 요약 (Foreign Key)

이 설계의 핵심은 각 기록 행(타자/투수)이 다음과 같이 세 가지 기준으로 **"정확하게 설명"**되도록 강제하는 것입니다.

| 기록 테이블 행 | $\rightarrow$ | 참조하는 정보 |
| :--- | :--- | :--- |
| **`season_id`** | $\rightarrow$ | **언제?** (2025년 한국시리즈) |
| **`player_id`** | $\rightarrow$ | **누구의?** (선수 A의 기록) |
| **`team_id`** | $\rightarrow$ | **어느 팀에서?** (LG 트윈스 소속으로) |

이 외래 키 관계를 통해 데이터베이스는 **잘못된(존재하지 않는) 팀 코드, 선수 ID, 혹은 시즌 ID**가 기록 테이블에 삽입되는 것을 원천적으로 차단합니다.